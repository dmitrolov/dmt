{"version":3,"sources":["./src/app/modules/sign-up/sign-up.component.html","./src/app/modules/sign-up/sign-up-routing.module.ts","./src/app/modules/sign-up/sign-up.component.scss","./src/app/modules/sign-up/sign-up.component.ts","./src/app/modules/sign-up/sign-up.module.ts","./src/app/utils/must-match.validator.ts"],"names":[],"mappings":"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","file":"modules-sign-up-sign-up-module.js","sourcesContent":["module.exports = \"<form\\r\\n  (ngSubmit)=\\\"onSubmit(registerForm)\\\"\\r\\n  [className]=\\\"'registration-form'\\\"\\r\\n  [formGroup]=\\\"registerForm\\\">\\r\\n  <div [className]=\\\"'registration-form__item'\\\">\\r\\n    <label [className]=\\\"'registration-form__label'\\\">\\r\\n      <span>Your login</span>\\r\\n      <input formControlName=\\\"login\\\" placeholder=\\\"Your login\\\" type=\\\"text\\\">\\r\\n    </label>\\r\\n    <div *ngIf=\\\"(f.login.dirty || f.login.touched) && f.login.errors\\\"\\r\\n         class=\\\"invalid-feedback\\\">\\r\\n      <div *ngIf=\\\"f.login.errors.required\\\">Login is required</div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div [className]=\\\"'registration-form__item'\\\">\\r\\n    <label [className]=\\\"'registration-form__label'\\\">\\r\\n      <span>Your email</span>\\r\\n      <input formControlName=\\\"email\\\" placeholder=\\\"Your email\\\" type=\\\"text\\\">\\r\\n    </label>\\r\\n    <div *ngIf=\\\"(f.email.dirty || f.email.touched) && f.email.errors\\\"\\r\\n         class=\\\"invalid-feedback\\\">\\r\\n      <div *ngIf=\\\"f.email.errors.required\\\">Email is required</div>\\r\\n      <div *ngIf=\\\"f.email.errors.email\\\">Email must be a valid email address</div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div [className]=\\\"'registration-form__item'\\\">\\r\\n    <label [className]=\\\"'registration-form__label'\\\">\\r\\n      <span>Your password</span>\\r\\n      <input formControlName=\\\"password\\\" placeholder=\\\"Your password\\\" type=\\\"password\\\">\\r\\n    </label>\\r\\n    <div *ngIf=\\\"(f.password.dirty || f.password.touched) && f.password.errors\\\"\\r\\n         class=\\\"invalid-feedback\\\">\\r\\n      <div *ngIf=\\\"f.password.errors.required\\\">Password is required</div>\\r\\n      <div *ngIf=\\\"f.password.errors.minlength\\\">Password must be at least 6 characters</div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div [className]=\\\"'registration-form__item'\\\">\\r\\n    <label [className]=\\\"'registration-form__label'\\\">\\r\\n      <span>Confirm password</span>\\r\\n      <input formControlName=\\\"passwordConfirm\\\" placeholder=\\\"Confirm password\\\" type=\\\"password\\\">\\r\\n    </label>\\r\\n    <div *ngIf=\\\"(f.passwordConfirm.dirty || f.passwordConfirm.touched) && f.passwordConfirm.errors\\\"\\r\\n         class=\\\"invalid-feedback\\\">\\r\\n      <div *ngIf=\\\"f.passwordConfirm.errors.required\\\">Confirm Password is required</div>\\r\\n      <div *ngIf=\\\"f.passwordConfirm.errors.mustMatch\\\">Passwords must match</div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <button type=\\\"submit\\\">Send</button>\\r\\n</form>\\r\\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SignUpComponent } from './sign-up.component';\n\nconst routes: Routes = [{ path: '', component: SignUpComponent }];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class SignUpRoutingModule { }\n","module.exports = \".registration-form {\\n  display: flex;\\n  flex-direction: column;\\n  padding: 1em;\\n}\\n.registration-form__item {\\n  display: flex;\\n  flex-direction: column;\\n  margin-bottom: 1em;\\n  text-align: center;\\n}\\n.registration-form__label {\\n  display: flex;\\n  flex-direction: column;\\n}\\n.ng-invalid.ng-touched:not(form) {\\n  border: 1px solid red;\\n}\\n.invalid-feedback {\\n  font-size: 0.7em;\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9zaWduLXVwL0M6XFxVc2Vyc1xcRG15dHJvX0Zyb2xvdjFcXFdlYnN0b3JtUHJvamVjdHNcXGRtdC9zcmNcXGFwcFxcbW9kdWxlc1xcc2lnbi11cFxcc2lnbi11cC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvbW9kdWxlcy9zaWduLXVwL3NpZ24tdXAuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFFQSxZQUFBO0FDQUY7QURFRTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUVBLGtCQUFBO0VBQ0Esa0JBQUE7QUNESjtBRElFO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0FDRko7QURNQTtFQUNFLHFCQUFBO0FDSEY7QURNQTtFQUNFLGdCQUFBO0VBQ0EsVUFBQTtBQ0hGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9zaWduLXVwL3NpZ24tdXAuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucmVnaXN0cmF0aW9uLWZvcm0ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuXHJcbiAgcGFkZGluZzogMWVtO1xyXG5cclxuICAmX19pdGVtIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5cclxuICAgIG1hcmdpbi1ib3R0b206IDFlbTtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB9XHJcblxyXG4gICZfX2xhYmVsIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIH1cclxufVxyXG5cclxuLm5nLWludmFsaWQubmctdG91Y2hlZDpub3QoZm9ybSkge1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJlZFxyXG59XHJcblxyXG4uaW52YWxpZC1mZWVkYmFjayB7XHJcbiAgZm9udC1zaXplOiAwLjdlbTtcclxuICBjb2xvcjogcmVkO1xyXG59XHJcbiIsIi5yZWdpc3RyYXRpb24tZm9ybSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDFlbTtcbn1cbi5yZWdpc3RyYXRpb24tZm9ybV9faXRlbSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuLnJlZ2lzdHJhdGlvbi1mb3JtX19sYWJlbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5cbi5uZy1pbnZhbGlkLm5nLXRvdWNoZWQ6bm90KGZvcm0pIHtcbiAgYm9yZGVyOiAxcHggc29saWQgcmVkO1xufVxuXG4uaW52YWxpZC1mZWVkYmFjayB7XG4gIGZvbnQtc2l6ZTogMC43ZW07XG4gIGNvbG9yOiByZWQ7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MustMatch} from 'src/app/utils/must-match.validator';\r\nimport {Player} from '../../models/player/player.model';\r\nimport {FirebaseService} from '../../core/firebase/firebase.service';\r\nimport {switchMap} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-sign-up',\r\n  templateUrl: './sign-up.component.html',\r\n  styleUrls: ['./sign-up.component.scss']\r\n})\r\nexport class SignUpComponent implements OnInit {\r\n  registerForm: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private firebaseService: FirebaseService,\r\n  ) {\r\n  }\r\n\r\n  // convenience getter for easy access to form fields\r\n  get f() {\r\n    return this.registerForm.controls;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.registerForm = this.fb.group({\r\n      login: ['', Validators.required],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      password: ['', [Validators.required, Validators.minLength(6)]],\r\n      passwordConfirm: ['', [Validators.required]],\r\n      role: 'user',\r\n    }, {\r\n      validator: MustMatch('password', 'passwordConfirm'),\r\n    });\r\n  }\r\n\r\n  onSubmit(form: FormGroup) {\r\n    this.markFormGroupTouchedAndDirty(form);\r\n    console.log(form);\r\n    if (form.valid) {\r\n      const player: Player = {\r\n        login: form.controls.login.value,\r\n        email: form.controls.email.value,\r\n        password: form.controls.password.value,\r\n        role: form.controls.role.value\r\n      };\r\n\r\n      this.firebaseService.createUserWithEmailAndPassword(player.email, player.password)\r\n        .pipe(\r\n          switchMap((r1) => this.firebaseService.signInWithEmailAndPassword(player.email, player.password)),\r\n          switchMap((r2) => this.firebaseService.updateUserProfile(player.login))\r\n        )\r\n        .subscribe(r1 => {\r\n          this.firebaseService.signOut();\r\n        });\r\n    }\r\n  }\r\n\r\n  private markFormGroupTouchedAndDirty(formGroup: FormGroup) {\r\n    for (const field of Object.keys(formGroup.controls)) {\r\n      formGroup.controls[field].markAsTouched();\r\n      formGroup.controls[field].markAsDirty();\r\n    }\r\n  }\r\n\r\n}\r\n\r\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\n\nimport {SignUpRoutingModule} from './sign-up-routing.module';\nimport {SignUpComponent} from './sign-up.component';\nimport {ReactiveFormsModule} from '@angular/forms';\n\n@NgModule({\n  declarations: [SignUpComponent],\n  imports: [\n    CommonModule,\n    SignUpRoutingModule,\n    ReactiveFormsModule,\n  ],\n  exports: [\n    SignUpComponent\n  ]\n})\nexport class SignUpModule { }\n","import {FormGroup} from '@angular/forms';\r\n\r\n// custom validator to check that two fields match\r\nexport function MustMatch(controlName: string, matchingControlName: string) {\r\n  return (formGroup: FormGroup) => {\r\n    const control = formGroup.controls[controlName];\r\n    const matchingControl = formGroup.controls[matchingControlName];\r\n\r\n    if (matchingControl.errors && !matchingControl.errors.mustMatch) {\r\n      // return if another validator has already found an error on the matchingControl\r\n      return;\r\n    }\r\n\r\n    // set error on matchingControl if validation fails\r\n    if (control.value !== matchingControl.value) {\r\n      matchingControl.setErrors({mustMatch: true});\r\n    } else {\r\n      matchingControl.setErrors(null);\r\n    }\r\n  };\r\n}\r\n"],"sourceRoot":"webpack:///"}